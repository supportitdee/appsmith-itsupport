{
  "gitSyncId": "67811a5458792a13d9b88165_509279a2-cfc2-47a7-8ef0-ebc04e195163",
  "id": "Form V1_InputDataPeraturanFinal",
  "pluginId": "postgres-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "-- Masukkan data ke tabel Peraturan dan ambil ID_Peraturan yang baru dimasukkan\nWITH inserted_peraturan AS (\n  INSERT INTO public.\"peraturan\" (\n    \"judul_peraturan\", \n    \"deskripsi\", \n    \"tanggal_diterbitkan\", \n    \"version\", \n    \"status\"\n  ) \n  VALUES (\n    '{{value_judul_peraturan.text}}',\n    '{{value_deskripsi_peraturan.text}}',\n    '{{tanggal_peraturan_terbit.selectedDate}}',\n    1,  -- Default version\n    'active'  -- Default status\n  ) \n  RETURNING \"id_peraturan\"\n),\n-- Masukkan data ke tabel Bab dengan menggunakan ID_Peraturan yang baru\ninserted_bab AS (\n  INSERT INTO public.\"bab\" (\n    \"id_peraturan\", \n    \"nomor_bab\", \n    \"judul_bab\", \n    \"isi_bab\", \n    \"version\", \n    \"status\"\n  )\n  VALUES (\n    (SELECT \"id_peraturan\" FROM inserted_peraturan),  -- Ambil ID_Peraturan dari hasil INSERT\n    '{{no_bab.text}}',\n    '{{judul_bab.text}}',\n    '{{isi_bab.text}}',\n    1,  -- Default version\n    'active'  -- Default status\n  )\n  RETURNING \"id_bab\"\n),\n-- Masukkan data ke tabel Subbab dengan menggunakan ID_Bab yang baru\ninserted_subbab AS (\n  INSERT INTO public.\"subbab\" (\n    \"id_bab\", \n    \"nomor_subbab\", \n    \"judul_subbab\", \n    \"isi_subbab\", \n    \"version\", \n    \"status\"\n  )\n  VALUES (\n    (SELECT \"id_bab\" FROM inserted_bab),  -- Ambil ID_Bab dari hasil INSERT\n    '{{no_sub_bab.text}}',\n    '{{judul_sub_bab.text}}',\n    '{{isi_sub_bab.text}}',\n    1,  -- Default version\n    'active'  -- Default status\n  )\n  RETURNING \"id_subbab\"\n)\n-- Masukkan data ke tabel Penjelasan dengan menggunakan ID_Subbab yang baru\nINSERT INTO public.\"penjelasan\" (\n  \"id_subbab\", \n  \"jenis_konten\", \n  \"konten\"\n)\nVALUES (\n  (SELECT \"id_subbab\" FROM inserted_subbab),  -- Ambil ID_Subbab dari hasil INSERT\n  '{{jenis_konten.selectedOptionValue}}',     -- Ambil nilai yang dipilih dari Dropdown\n  CASE \n    WHEN '{{jenis_konten.selectedOptionValue}}' = 'media' THEN '{{input_media.files}}'  -- Ambil file pertama jika media dipilih\n    ELSE '{{isi_konten.text}}'  -- Jika teks dipilih, masukkan konten teks\n  END\n);\n",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "db_peraturan_final",
      "isAutoGenerated": false,
      "name": "db_peraturan_final",
      "pluginId": "postgres-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "executeOnLoad": false,
    "name": "InputDataPeraturanFinal",
    "pageId": "Form V1",
    "userSetOnLoad": false
  }
}